<!DOCTYPE html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.js" integrity="sha256-kzv+r6dLqmz7iYuR2OdwUgl4X5RVsoENBzigdF5cxtU=" crossorigin="anonymous"></script>
  <script src="chart.js"></script>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="title-div" class="container"></div>

  <div class="container control-div">
    Slice by:
    <select id="sliceBy">
      <option value="all">n/a</option>
      <option value="channel" selected>channel</option>
      <option value="show">show</option>
      <option value="date">date</option>
    </select>
    <button id="renderBtn" type="button">Render!</button>
  </div>

  <div id="myDiv" class="container"></div>

  <script>
    let url = new URL(window.location.href); // No quotes for name
    var name = url.searchParams.get('name'); // Name format: firstlast.lower()
    if (name == 'null') {
      name = 'trayvonmartin';
    }
    console.log(name);

    $('#title-div').append($('<h1>').text(`Still images of ${name}`));

    var faces;
    init(name, function(data) { // TODO: make naming  more flexible
      faces = data;
      console.log('READY');
    });

    $('#renderBtn').click(function() {
      let slice_by = $('#sliceBy').val();
      render('#myDiv', faces, slice_by);
    });
  </script>
</body>
</html>
